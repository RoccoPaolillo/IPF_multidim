install.packages("learnr")
library(rvest)
library(tidyverse)
library(tibble)
library(dplyr)
library(stringi)
library(stringr)
library(readtext)
library(gdata)
library(lubridate)
# Sys.setlocale("LC_MESSAGES", 'en_GB.UTF-8')
# url_tr = "https://raw.githack.com/ccs-amsterdam/r-course-material/master/miscellaneous/simple_html.html"
setwd("C:/Users/rocpa/OneDrive/Desktop/ROME_CNR/WP5/datalazio")
library(rvest)
url = "https://www.opensalutelazio.it/salute/stato_salute.php?patologie"
read_html(url)
read_html(url) %>%
html_element("div#datiordered.tabs")
read_html(url) %>%
html_element("div.datiordered.tabs")
read_html(url) %>%
html_element("div.datiordered")
read_html(url) %>%
html_element("div#datiordered")
read_html(url) %>%
html_element("div.")
read_html(url) |>  html_element("div.")
read_html(url) |>  html_element("div#results.content")
t <- read_html(url) |>  html_element("div#results.content")
View(t)
read_html(url) %>%  html_element("div#results.content")
read_html(url) |>  html_element("results.content")
read_html(url) |>  html_element("div#results.content")
read_html(url) |>  html_element("div#datiordered.tabs")
read_html(url) |>  html_element("table")
read_html(url) |>  html_element("table.tblalldata.tbTbIndicatori")
read_html(url) |>  html_element("table#tblalldata.tbTbIndicatori")
read_html(url) %>%  html_element("table#tblalldata.tbTbIndicatori")
read_html(url) |>  html_element(".table#tblalldata.tbTbIndicatori")
read_html(url) |>  html_element("table#tblalldata.tbTbIndicatori") %>%
html_table()
read_html(url) |>  html_element("table#tblalldata") %>%
html_table()
read_html(url) |>  html_element("table.tblalldata") %>%
html_table()
read_html(url) |>  html_element("table.tbTbIndicatori") %>%
html_table()
read_html(url) |>  html_element("tblalldata") %>%
html_table()
read_html(url) |>  html_element("tblalldata")
read_html(url) |>  html_element("div.titolo")
read_html(url) %>%  html_element("div.titolo")
read_html(url) %>%  html_element("titolo")
read_html(url) %>%  html_element(".tbTbIndicatori")
read_html(url) %>%  html_element("wrapper")
read_html(url) |>  html_element("wrapper")
ur <- read_html(url)
View(ur)
ur <- read_html(url) %>% html_elements("div.fldset")
ur <- read_html(url) %>% html_attrs()
read_html(url) %>% html_attrs()
read_html(url) %>% html_element("table")
url %>% html_element("table")
url = "https://www.opensalutelazio.it/salute/stato_salute.php?patologie.html"
read_html(url) %>% html_element("table")
url = "https://www.opensalutelazio.it/salute/stato_salute.php?patologie"
read_html(url) %>% html_element("table")
read_html(url) %>% html_element("table") %>% html_text2
url = "https://www.opensalutelazio.it/salute/stato_salute.php?patologie.html"
read_html(url) %>% html_element("table") %>% html_text2
read_html(url) %>% html_element("table") %>% html_text
read_html(url) %>% html_element("table") %>% html_text2()
read_html(url) %>% html_element("table") %>% html_text()
read_html(url) %>% html_elements()
read_html(url) %>% html_elements("table")
# BITKOM #### ok ####
i = "https://www.bitkom.org/Presse/Presseinformation/Jedes-dritte-Startup-hat-Corona-Hilfen-erhalten"
df <- data[data$actor == "BITKOM",]
title <- function(i){read_html(i) %>% html_nodes("[property = 'og:title']") %>% html_attr("content")}
subtitle <- "xxxxx"
text <- function(i){read_html(i) %>% html_element("div.wysiwyg__body") %>% html_text2()}
i = "https://bdi.eu/artikel/news/verhandlungen-nicht-mit-politischen-zielen-ueberfrachten/"
title <- read_html(i) %>% html_nodes("[property = 'og:title']") %>% html_attr("content")
subtitle <- "xxxxx"
text <- read_html(i) %>% html_element("div.wysiwyg__body") %>% html_text2()
i <- "https://www.bauindustrie.de/pm/koalition-legt-mit-konjunkturpaket-guten-start-hin"
read_html(i) %>% html_element("div.news-text-wrap") %>% html_text2()
read_html(url) %>% html_element("div#datiordered.tabs")
read_html(url) %>% html_element("div.datiordered.tabs")
read_html(url) %>% html_element("datiordered.tabs")
read_html(url) %>% html_element("div#datiordered")
read_html(url) %>% html_element("div#datiordered.tabs")
read_html(url) %>% html_element("table.tblalldata")
read_html(url) %>% html_element("div.datiordered")
read_html(url) %>% html_node("div.datiordered")
url = "https://www.opensalutelazio.it/salute/stato_salute.php"
pg <- html_session(url)
View(pg)
data <-
purrr::map_dfr(
1:4288, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_POST(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
data <-
purrr::map_dfr(
1:4, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_POST(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url = "https://www.opensalutelazio.it/salute/stato_salute.php?patologie"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:4, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_POST(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
pg <- html_session(url)
data <-
purrr::map_dfr(
1:4, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_GET(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url = "https://www.opensalutelazio.it/salute/stato_salute.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:4, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_GET(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url = "https://www.opensalutelazio.it/salute/stato_salute.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:4, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_POST(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url <- "https://www.metabolomicsworkbench.org/data/mb_structure_tableonly.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:4288, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_POST(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url <- "https://www.metabolomicsworkbench.org/data/mb_structure_tableonly.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:30, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::request_POST(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url <- "https://www.metabolomicsworkbench.org/data/mb_structure_tableonly.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:30, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::html_form_submit(pg,
url,
body = list(
page = i
))
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url <- "https://www.metabolomicsworkbench.org/data/mb_structure_tableonly.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:30, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest:::html_form_submit(pg,
url)
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url <- "https://www.metabolomicsworkbench.org/data/mb_structure_tableonly.php"
pg <- html_session(url)
data <-
purrr::map_dfr(
1:30, # you might wanna change it to a small number to try first or scrape multiple times and combine data frames later, in case something happens in the middle
function(i) {
pg <- rvest::html_form_submit(pg,
url)
read_html(pg) %>%
html_node("table") %>%
html_table()
}
)
url <- "https://www.metabolomicsworkbench.org/data/mb_structure_tableonly.php"
pg <- html_session(url)
View(pg)
?map_dfr()
